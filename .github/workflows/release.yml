# limit release to publish action otherwise GIT will run multiple actions which runs multiple builds simultaneously
on:
  release:
    types: [published]

name: build on release
jobs:
  build:
    name: Go RELEASE
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@master
      - name: go1.13 release linux
        uses: shoukoo/golang-pipeline/go1.13/release@master
#        if statement is not needed here, it lives here only for demonstrative purposes
#        if: github.event.action == 'published'
        env:
          PROJECT_PATH: "./cmd/manager"
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          GOOS: linux
          GOARCH: amd64
        with:
          tag_name: ${{ github.ref }}
          release_name: Release ${{ github.ref }}
#          upload_url: ${{ steps.create_release.outputs.upload_url }}
#       upload_url: ${{ github.event.release.release.upload_url }}



